flowchart TB
    subgraph B2B["B2B - Business Partners"]
        Merchant["ğŸª Merchant/Venue<br/>Event Organizers"]
        Admin["ğŸ‘¨â€ğŸ’¼ Admin Portal<br/>Management Dashboard"]
    end
    
    subgraph B2B2C["B2B2C - End Customers"]
        Customer["ğŸ‘¤ End Customer<br/>Ticket Buyers"]
        Mobile["ğŸ“± Mobile App<br/>iOS & Android"]
        Web["ğŸŒ Web Platform<br/>Responsive Site"]
    end
    
    subgraph Core["Core POS System"]
        API["ğŸ”Œ API Gateway<br/>REST & GraphQL"]
        Auth["ğŸ” Authentication<br/>OAuth 2.0 / JWT"]
        Inventory["ğŸ“¦ Inventory Management<br/>Real-time Availability"]
        Pricing["ğŸ’° Dynamic Pricing<br/>Tier & Discount Engine"]
        Order["ğŸ“‹ Order Processing<br/>Transaction Management"]
    end
    
    subgraph Payment["Payment Processing"]
        Gateway["ğŸ’³ Payment Gateway<br/>Stripe / PayPal"]
        Wallet["ğŸ‘› Digital Wallet<br/>Stored Value"]
        Refund["â†©ï¸ Refund Engine<br/>Automated Returns"]
    end
    
    subgraph Fulfillment["Ticket Fulfillment"]
        QR["ğŸ“² QR Code Generator<br/>Secure Tickets"]
        Email["ğŸ“§ Email Service<br/>Ticket Delivery"]
        SMS["ğŸ’¬ SMS Notifications<br/>Confirmations"]
        Print["ğŸ–¨ï¸ Print-at-Home<br/>PDF Generation"]
    end
    
    subgraph Analytics["Analytics & Reporting"]
        BI["ğŸ“Š Business Intelligence<br/>Sales Analytics"]
        Reports["ğŸ“ˆ Custom Reports<br/>Revenue & Attendance"]
        ML["ğŸ¤– ML Insights<br/>Demand Forecasting"]
    end
    
    subgraph Operations["Operations"]
        Scanner["ğŸ“± Scanner App<br/>Entry Validation"]
        POS["ğŸ–¥ï¸ Box Office POS<br/>On-site Sales"]
        Support["ğŸ§ Customer Support<br/>Help Desk"]
    end
    
    subgraph Data["Data Layer"]
        DB["ğŸ—„ï¸ PostgreSQL<br/>Transactional Data"]
        Cache["âš¡ Redis Cache<br/>Session & Inventory"]
        Queue["ğŸ“¬ Message Queue<br/>RabbitMQ"]
        Storage["â˜ï¸ Cloud Storage<br/>S3 / CDN"]
    end
    
    %% B2B Flow
    Merchant --> Admin
    Admin --> API
    Admin --> BI
    Admin --> Reports
    
    %% B2B2C Flow
    Customer --> Mobile
    Customer --> Web
    Mobile --> API
    Web --> API
    
    %% Core Processing
    API --> Auth
    Auth --> Inventory
    Auth --> Order
    Inventory --> Pricing
    Pricing --> Order
    
    %% Payment Flow
    Order --> Gateway
    Order --> Wallet
    Gateway --> Refund
    
    %% Fulfillment Flow
    Order --> QR
    QR --> Email
    QR --> SMS
    QR --> Print
    
    %% Operations Flow
    QR --> Scanner
    Merchant --> POS
    POS --> API
    Scanner --> API
    Customer --> Support
    
    %% Analytics Flow
    Order --> BI
    BI --> ML
    ML --> Reports
    Reports --> Admin
    
    %% Data Layer
    API --> DB
    API --> Cache
    API --> Queue
    QR --> Storage
    Print --> Storage
    
    %% Styling
    style Merchant fill:#FF7A3D20,stroke:#FF7A3D,stroke-width:3px
    style Customer fill:#FF7A3D20,stroke:#FF7A3D,stroke-width:3px
    style API fill:#FF7A3D20,stroke:#FF7A3D,stroke-width:2px
    style Order fill:#FF7A3D20,stroke:#FF7A3D,stroke-width:2px
    style Gateway fill:#FF7A3D20,stroke:#FF7A3D,stroke-width:2px
    style QR fill:#FF7A3D20,stroke:#FF7A3D,stroke-width:2px
    style BI fill:#FF7A3D20,stroke:#FF7A3D,stroke-width:2px
